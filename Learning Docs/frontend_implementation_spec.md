# GeoPin Frontend Implementation Specification

## Project Overview
GeoPin is a web-based application for managing personal points of interest, initially focused on the London area. The application provides a Google Maps-like interface where users can drop pins on locations and add detailed information about those places. This document outlines the frontend implementation plan, building upon our existing Spring Boot backend with its tested spatial query capabilities.

## Technical Architecture

### Frontend Stack
- **Core Framework**: React
- **Map Integration**: Google Maps JavaScript API
  - Chosen for its comprehensive coverage of London
  - Familiar user interface patterns
  - Robust geocoding capabilities
- **Styling**: Tailwind CSS
  - Utilizing utility-first approach for consistent styling
  - Avoiding arbitrary values to maintain compatibility
- **State Management**: React Hooks (useState, useEffect)
  - Keeping state management simple for MVP
  - Can scale to more robust solutions if needed

### Backend Integration (Existing)
- Spring Boot REST API
- PostGIS for spatial queries
- Tested endpoints for:
  - Finding POIs within a distance
  - Finding POIs within a bounding box
  - Finding POIs by tag name
  - Tag management

## Core Features and Implementation Details

### Map Component
The map component will serve as the primary interface for user interaction. It will:
- Center initially on London (coordinates: 51.5074° N, 0.1278° W)
- Allow zoom levels appropriate for city navigation
- Support pin dropping through click interactions
- Display existing pins within the current viewport
- Implement smooth loading of pins as the user pans around

### Pin Management
Pins are the core data structure of our application. Each pin contains:
```typescript
interface Pin {
  id?: string;          // Generated by backend
  title: string;        // User-provided name
  description: string;  // Additional details
  location: {           // Geographic coordinates
    lat: number;
    lng: number;
  };
  tags: string[];       // User-defined categories
}
```

### Modal Interface
The pin detail modal provides a clean interface for creating and editing pins. It includes:
- Title input field
- Description text area
- Tag management system
- Save/Cancel actions
- Delete option for existing pins

### Component Architecture
```
src/
├── components/
│   ├── Map/
│   │   ├── MapComponent.jsx        # Main map interface
│   │   └── MapControls.jsx         # Zoom, center controls
│   ├── Pins/
│   │   ├── PinDetailModal.jsx      # Pin creation/editing
│   │   └── PinMarker.jsx          # Individual pin display
│   └── shared/
│       └── LoadingSpinner.jsx      # Loading states
├── services/
│   ├── api.js                      # Backend API integration
│   └── mapService.js               # Google Maps setup
└── utils/
    └── coordinateUtils.js          # Geographic calculations
```

## User Stories

### Essential Features (MVP)
1. As a user, I want to see a map centered on London when I open the application
   - Map loads with appropriate zoom level
   - Initial viewport shows central London
   - Map controls are immediately accessible

2. As a user, I want to create a new pin by clicking on the map
   - Click interaction initiates pin creation
   - Modal opens for entering pin details
   - Form includes fields for title, description, and tags

3. As a user, I want to view details of an existing pin
   - Clicking an existing pin opens its details
   - All saved information is displayed clearly
   - Options to edit or delete are available

4. As a user, I want to edit or delete my existing pins
   - Edit functionality opens modal with current values
   - Delete option requires confirmation
   - Changes persist after closing modal

5. As a user, I want to organize my pins using tags
   - Can add multiple tags to each pin
   - Can remove tags from pins
   - Tags are saved with pin data

### Future Enhancements
1. As a user, I want to filter pins by tags
2. As a user, I want to search for locations using an address
3. As a user, I want to see pins clustered when zoomed out
4. As a user, I want to measure distances between pins

## API Integration

### Endpoint Usage
The frontend will interact with our tested backend endpoints:

```javascript
// Finding pins in current viewport
GET /api/pois/bounds
Parameters: north, south, east, west

// Creating a new pin
POST /api/pois
Body: { title, description, location, tags }

// Updating an existing pin
PUT /api/pois/{id}
Body: { title, description, location, tags }

// Deleting a pin
DELETE /api/pois/{id}
```

## Development Phases

### Phase 1: Basic Map Integration
- Set up React project structure
- Implement Google Maps integration
- Create basic map display and controls

### Phase 2: Pin Management
- Implement pin creation interface
- Develop pin detail modal
- Add pin editing capabilities

### Phase 3: Tag System
- Implement tag creation and management
- Add tag display to pins
- Enable tag-based organization

### Phase 4: Testing and Polish
- Add loading states and error handling
- Implement responsive design adaptations
- Optimize performance for pin loading

## Performance Considerations
- Implement viewport-based pin loading to manage data volume
- Optimize marker rendering for smooth map interaction
- Cache frequently accessed pin data
- Debounce map movement events for efficient API calls

## Security Considerations
- Secure handling of Google Maps API key
- Validation of all user inputs
- Proper error handling and user feedback
- Rate limiting for API requests

This specification serves as a living document and will be updated as development progresses and requirements evolve.